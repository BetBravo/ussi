{% extends 'base.html.twig' %}
{% block title %} Paciente {% endblock %}
{% block Subtitulo %} Editar Datos del Profesional -  <small> <a href="{{ path('profesional_index') }}">Regresar a la lista</a></small> {% endblock %} 
{% block body %}
    {% for msg in app.session.flashBag.get('success') %}
        <div class="alert alert-success"> {{ msg }} </div>       
    {% endfor %}

    {% for msg in app.session.flashBag.get('error') %}
        <div class="alert alert-danger"> <p>{{ msg }}</p> </div>
    {% endfor %}
    <div class="x_content">
        <br />
        {# form_theme form 'AppBundle::jquery.collection.html.twig' #}

        {{ form_start(edit_form, { 'attr': {'id':'paciente','class': 'form-horizontal form-label-left'} }) }} 
        {{ form_errors(edit_form) }}
        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="nacionalidad">{{ form_label(edit_form.persona.nacionalidad) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.nacionalidad) }}                
                {{form_widget(edit_form.persona.nacionalidad,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="cedula">{{ form_label(edit_form.persona.cedula) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.cedula) }}                
                {{form_widget(edit_form.persona.cedula,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="primerApellido">{{ form_label(edit_form.persona.primerApellido) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.primerApellido) }}                
                {{form_widget(edit_form.persona.primerApellido,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="segundoApellido">{{ form_label(edit_form.persona.segundoApellido) }}</label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.segundoApellido) }}                
                {{form_widget(edit_form.persona.segundoApellido,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="primerNombre">{{ form_label(edit_form.persona.primerNombre) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.primerNombre) }}                
                {{form_widget(edit_form.persona.primerNombre,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="segundoNombre">{{ form_label(edit_form.persona.segundoNombre) }} </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.segundoNombre) }}                
                {{form_widget(edit_form.persona.segundoNombre,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>        

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="genero">{{ form_label(edit_form.persona.genero) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.genero) }}                
                {{form_widget(edit_form.persona.genero,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="genero">{{ form_label(edit_form.persona.telefono) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.telefono) }}                
                {{form_widget(edit_form.persona.telefono,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="genero">{{ form_label(edit_form.persona.email) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.email) }}                
                {{form_widget(edit_form.persona.email,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="genero">{{ form_label(edit_form.persona.foto) }} </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.persona.foto) }}                
                {{form_widget(edit_form.persona.foto) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="genero">{{ form_label(edit_form.codigoSsa) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.codigoSsa) }}                
                {{form_widget(edit_form.codigoSsa ) }}                
            </div>
        </div>



        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="edoCivil">{{ form_label(edit_form.edoCivil) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.edoCivil) }}                
                {{form_widget(edit_form.edoCivil,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>


        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="ocupacion">{{ form_label(edit_form.ocupacion) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.ocupacion) }}                
                {{form_widget(edit_form.ocupacion,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="analfabeta">{{ form_label(edit_form.analfabeta) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.analfabeta) }}                
                {{form_widget(edit_form.analfabeta) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="estudio">{{ form_label(edit_form.estudio) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.estudio) }}                
                {{form_widget(edit_form.estudio,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="anoAprobado">{{ form_label(edit_form.anoAprobado) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.anoAprobado) }}                
                {{form_widget(edit_form.anoAprobado,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>



        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="fechaNacimiento">{{ form_label(edit_form.fechaNacimiento) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.fechaNacimiento) }}                
                {{form_widget(edit_form.fechaNacimiento) }}                
            </div>
        </div>



        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="apellidoFamilia">{{ form_label(edit_form.apellidoFamilia) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.apellidoFamilia) }}                
                {{form_widget(edit_form.apellidoFamilia,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="cedulaJefeFamilia">{{ form_label(edit_form.cedulaJefeFamilia) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.cedulaJefeFamilia) }}                
                {{form_widget(edit_form.cedulaJefeFamilia,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="comunidad">{{ form_label(edit_form.comunidad) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.comunidad) }}                
                {{form_widget(edit_form.comunidad,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div id='pfg' class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="pfg">{{ form_label(edit_form.pfg) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.pfg) }}                
                {{form_widget(edit_form.pfg,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="religion">{{ form_label(edit_form.religion) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.religion) }}                
                {{form_widget(edit_form.religion,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="etnia">{{ form_label(edit_form.etnia) }} <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6 col-xs-12">
                {{ form_errors(edit_form.etnia) }}                
                {{form_widget(edit_form.etnia,{ 'attr': {'class': 'form-control col-md-7 col-xs-12'} } ) }}                
            </div>
        </div>
        <div class="ln_solid"></div>
        <div class="form-group">
            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">                
                <button type="submit" class="btn btn-success">Registrar</button>
            </div>
        </div>
        {{ form_end(edit_form) }}                           
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        $(document).ready(function () {
            
            
                $('#appbundle_profesional_ocupacion').val('{{paciente.ocupacion}}');
                $('#appbundle_profesional_apellidoFamilia').val('{{paciente.apellidoFamilia}}');
                $('#appbundle_profesional_cedulaJefeFamilia').val('{{paciente.cedulaJefeFamilia}}');
                $('#appbundle_profesional_edoCivil').val('{{paciente.edoCivil}}').prop('selected', true);
                $('#appbundle_profesional_estudio').val('{{paciente.estudio}}').prop('selected', true);
                $('#appbundle_profesional_anoAprobado').val('{{paciente.anoAprobado}}').prop('selected', true);
                $('#appbundle_profesional_comunidad').val('{{paciente.comunidad}}').prop('selected', true);
                $('#appbundle_profesional_religion').val('{{paciente.religion.id}}').prop('selected', true);
                $('#appbundle_profesional_etnia').val('{{paciente.etnia.id}}').prop('selected', true);


                var now = new Date({{paciente.fechaNacimiento |date("d/m/Y")}});
                //var today = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
                var day = ("0" + now.getDate()).slice(-2);
                var month = ("0" + (now.getMonth() + 1)).slice(-2);
                var today = now.getFullYear();
                $('#appbundle_profesional_fechaNacimiento_day').val(day);
                $('#appbundle_profesional_fechaNacimiento_month').val(month);
                $('#appbundle_profesional_fechaNacimiento_year').val(today);


                // $('#appbundle_profesional_date_created').val(today);

                if ($('#appbundle_profesional_comunidad').val() === 'pfg') {
                    $('#pfg').show();
                } else {
                    $('#appbundle_profesional_pfg').val(null);
                    $('#pfg').hide();
                }
                $("#appbundle_profesional_comunidad").click(function () {
                    if ($('#appbundle_profesional_comunidad').val() === 'pfg') {
                        $('#pfg').show();
                    } else {
                        $('#appbundle_profesional_pfg').val(null);
                        $('#pfg').hide();
                    }
                });
            
        });
    </script>
{% endblock %}